"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if((typeof exports==="undefined"?"undefined":_typeof(exports))==="object"){module.exports=e($||require("jquery"))}else{e(jQuery)}})(function(e){"use strict";var t="styler";var i="-"+t;var s={locale:navigator.browserLanguage||navigator.language||navigator.userLanguage||"en-US",select:{search:{limit:10,ajax:undefined},triggerHTML:'<div class="jq-selectbox__trigger-arrow"></div>',visibleOptions:0,smartPosition:true,onOpened:function a(){},onClosed:function d(){}},checkbox:{indeterminate:false},password:{switchHTML:'<button type="button" class="'+t+'"></button>'},onFormStyled:function c(){}};var o={"en-US":{file:{placeholder:"No file selected",browse:"Browse...",counter:"Selected files: %s"},select:{placeholder:"Select...",search:{notFound:"No matches found",placeholder:"Search..."}},password:{show:"&#10687;",hide:"&#10686;"}},"ru-RU":{file:{placeholder:"Файл не выбран",browse:"Обзор...",counter:"Выбрано файлов: %s"},select:{placeholder:"Выберите...",search:{notFound:"Совпадений не найдено",placeholder:"Поиск..."}}},"uk-UA":{file:{placeholder:"Файл не обрано",browse:"Огляд...",counter:"Обрано файлів: %s"},select:{placeholder:"Виберіть...",search:{notFound:"Збігів не знайдено",placeholder:"Пошук..."}}}};o["en"]=o["en-US"];o["ru"]=o["ru-RU"];o["ua"]=o["uk-UA"];function n(e){if(e.attr("id")!==undefined&&e.attr("id")!==""){this.id=e.attr("id")+i}this.title=e.attr("title");this.classes=e.attr("class");this.data=e.data()}function l(t,i){this.element=t;this.customElement=undefined;this.options=e.extend(true,{},s,i);var n=e.extend(true,{},o["en-US"],o[this.options.locale]);this.locales=e.extend(true,{},n,this.options.locales);this.init()}l.prototype={init:function h(){var s=this,o=e(this.element);var l=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i),a=navigator.userAgent.match(/Android/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i);if(o.is(":checkbox")){var d=function(){var i=function s(t,i,o){this.element=t;this.options=i;this.locale=o;var l=new n(this.element);this.checkbox=e('<div class="jq-checkbox"><div class="jq-checkbox__div"></div></div>').attr({id:l.id,title:l.title,unselectable:"on"}).addClass(l.classes).data(l.data);this.element.addClass("jq-hidden").after(this.checkbox).prependTo(this.checkbox);this.setEvents().repaint()};i.prototype={setEvents:function o(){var i=this,s=this.options,o=this.element,n=this.checkbox;n.on("repaint",function(){i.repaint()}).on("click",function(e){e.preventDefault();if(!n.is(".disabled")){if(o.is(":checked")||o.is(":indeterminate")){o.prop("checked",s.indeterminate&&o.is(":indeterminate"));o.prop("indeterminate",false)}else{if(s.indeterminate){o.prop("checked",false).prop("indeterminate",true)}else{o.prop("checked",true).prop("indeterminate",false)}}o.focus().trigger("change").triggerHandler("click")}});o.closest("label").add('label[for="'+this.element.attr("id")+'"]').on("click."+t,function(t){if(!e(t.target).is("a")&&!e(t.target).closest(n).length){n.triggerHandler("click");t.preventDefault()}});o.on("change."+t,function(){n.triggerHandler("repaint")}).on("keydown."+t,function(e){if(e.which===32){e.preventDefault();n.triggerHandler("click")}}).on("focus."+t,function(){if(!n.is(".disabled")){n.addClass("focused")}}).on("blur."+t,function(){n.removeClass("focused")});return this},repaint:function l(){var e=this.element,t=this.checkbox;if(e.is(":checked")||e.is(":indeterminate")){if(e.is(":indeterminate")){t.removeClass("checked").addClass("indeterminate")}else{t.removeClass("indeterminate").addClass("checked")}}else{t.removeClass("indeterminate").removeClass("checked")}t.toggleClass("disabled",e.is(":disabled"));return this},destroy:function r(){var e=this.element;e.off("."+t+", refresh").removeAttr("style").parent().before(e).remove();e.closest("label").add('label[for="'+e.attr("id")+'"]').off("."+t);return this}};return i}();this.customElement=new d(o,this.options.checkbox,this.locales.checkbox)}else if(o.is(":radio")){var c=function(){var i=function s(t,i,o){this.element=t;this.options=i;this.locale=o;var l=new n(this.element);this.radio=e('<div class="jq-radio"><div class="jq-radio__div"></div></div>').attr({id:l.id,title:l.title,unselectable:"on"}).addClass(l.classes).data(l.data);this.element.addClass("jq-hidden").after(this.radio).prependTo(this.radio);this.setEvents().repaint()};i.prototype={setEvents:function o(){var i=this,s=this.element,o=this.radio;o.on("repaint",function(){i.repaint()}).on("click",function(t){t.preventDefault();if(!o.is(".disabled")){var i=s.attr("name");var n=o.closest("#"+i).find('input[name="'+i+'"]:radio');if(n.length<=0){n=e("body").find('input[name="'+i+'"]:radio')}n.prop("checked",false).parent().removeClass("checked");s.prop("checked",true).focus().trigger("change").triggerHandler("click")}});s.on("change."+t,function(){o.triggerHandler("repaint")}).on("keydown."+t,function(e){if(e.which===32){e.preventDefault();o.trigger("click")}}).on("focus."+t,function(){if(!o.is(".disabled")){o.addClass("focused")}}).on("blur."+t,function(){o.removeClass("focused")});s.closest("label").add('label[for="'+s.attr("id")+'"]').on("click."+t,function(t){if(!e(t.target).is("a")&&!e(t.target).closest(o).length){o.triggerHandler("click");t.preventDefault()}});return this},repaint:function l(){var e=this.element,t=this.radio;e.parent().toggleClass("checked",e.is(":checked"));t.toggleClass("disabled",e.is(":disabled"));return this},destroy:function r(){var e=this.element;e.off("."+t+", refresh").removeAttr("style").parent().before(e).remove();e.closest("label").add('label[for="'+e.attr("id")+'"]').off("."+t);return this}};return i}();this.customElement=new c(o,this.options.radio,this.locales.radio)}else if(o.is(":file")){var h=function(){var i=function s(t,i,o){this.element=t;this.options=i;this.locale=o;this.placeholderText=this.element.data("placeholder")||o["placeholder"];this.browseText=this.element.data("browse")||o["browse"];var l=new n(this.element);this.file=e('<div class="jq-file">'+'<div class="jq-file__name">'+this.placeholderText+"</div>"+'<div class="jq-file__browse">'+this.browseText+"</div>"+"</div>").attr({id:l.id,title:l.title}).addClass(l.classes).data(l.data);this.element.addClass("jq-hidden").after(this.file).appendTo(this.file);this.setEvents().repaint()};i.prototype={setEvents:function o(){var e=this,i=this.element,s=this.file;s.on("repaint",function(){e.repaint()});i.on("change."+t,function(){s.triggerHandler("repaint")}).on("focus."+t,function(){s.addClass("focused")}).on("blur."+t,function(){s.removeClass("focused")}).on("click."+t,function(){s.removeClass("focused")});return this},repaint:function l(){var t=this.element,i=this.file,s=this.options,o=e("div.jq-file__name",i);var n=t.val();if(t.is("[multiple]")){var l=t[0].files.length;if(l>0){n=(t.data("number")||s.counter).replace("%s",l)}else{n=""}}o.text(n.replace(/.+[\\\/]/,"")||this.placeholderText);i.toggleClass("changed",n!=="").toggleClass("disabled",t.is(":disabled"));return this},destroy:function r(){var e=this.element;e.off("."+t+", refresh").removeAttr("style").parent().before(e).remove();return this}};return i}();this.customElement=new h(o,this.options.file,this.locales.file)}else if(o.is('input[type="number"]')){var f=function(){var i=function s(t,i,o){this.element=t;this.options=i;this.locale=o;var l=new n(this.element);this.number=e('<div class="jq-number">'+'<div class="jq-number__spin minus"></div>'+'<div class="jq-number__spin plus"></div>'+"</div>").attr({id:l.id,title:l.title}).addClass(l.classes).data(l.data);this.element.after(this.number).prependTo(this.number).wrap('<div class="jq-number__field"></div>');this.setEvents().repaint()};i.prototype={setEvents:function o(){var i=this,s=this.element,o=this.number;var n=null,l=null;o.on("repaint",function(){i.repaint()}).on("mousedown","div.jq-number__spin",function(){if(s.is(":disabled")){return}var t=e(this);i.changeValue(t);n=setTimeout(function(){l=setInterval(function(){i.changeValue(t)},40)},350)}).on("mouseup mouseout","div.jq-number__spin",function(){if(s.is(":disabled")){return}clearTimeout(n);clearInterval(l)});s.on("focus."+t,function(){o.addClass("focused")}).on("blur."+t,function(){o.removeClass("focused")});return this},repaint:function l(){this.number.toggleClass("disabled",this.element.is(":disabled"));return this},changeValue:function r(t){var i=this.element;var s=i.attr("min")||undefined,o=i.attr("max")||undefined,n=parseFloat(i.attr("step"))||1;var l=e.isNumeric(i.val())?i.val():0,r=parseFloat(l)+(t.is(".plus")?n:-n);var a=(n.toString().split(".")[1]||[]).length.prototype;var d="1";if(a>0){while(d.length<=a){d=d+"0"}r=Math.round(r*d)/d}if(e.isNumeric(s)&&e.isNumeric(o)){if(r>=s&&r<=o){i.val(r).change()}}else if(e.isNumeric(s)&&!e.isNumeric(o)){if(r>=s){i.val(r).change()}}else if(!e.isNumeric(s)&&e.isNumeric(o)){if(r<=o){i.val(r).change()}}else{i.val(r).change()}},destroy:function a(){var e=this.element;e.off("."+t+", refresh").closest(".jq-number").before(e).remove();return this}};return i}();this.customElement=new f(o,this.options.number,this.locales.number)}else if(o.is('input[type="password"]')&&this.options.password.switchHTML!==undefined&&this.options.password.switchHTML!=="none"){var u=function(){var i=function s(t,i,o){this.element=t;this.options=i;this.locale=o;var n=e('<div class="jq-password__switch">'+(this.options.switchHTML||"")+"</div>");this.password=e('<div class="jq-password">').append(n);this.button=n.children("button").length>0?n.children("button"):n;if(this.button.html()===""&&o["show"]!==""){this.button.html(o["show"]);if(n.children("button").length<=0){n.addClass("jq-password__switch-text")}}this.element.after(this.password).prependTo(this.password);this.setEvents().repaint()};i.prototype={setEvents:function o(){var i=this.locale,s=this.element,o=this.password,n=this.button;o.on("repaint",function(){o.toggleClass("disabled",s.is(":disabled"));n.prop("disabled",s.is(":disabled"))}).on("click",".jq-password__switch",function(){var t=e(this),o=t.closest(".jq-password"),l=o.is(".jq-password_seen");o.toggleClass("jq-password_seen",!l);if(i["show"]!==""&&i["hide"]!==""){n.html(l?i["show"]:i["hide"])}s.attr("type",l?"password":"text")});s.on("focus."+t,function(){o.addClass("focused")}).on("blur."+t,function(){o.removeClass("focused")});return this},repaint:function n(){var e=this.element,t=this.password,i=this.button;t.toggleClass("disabled",e.is(":disabled"));i.prop("disabled",e.is(":disabled"));return this},destroy:function l(){var e=this.element;e.off("."+t+", refresh").closest(".jq-password").before(e).remove();return this}};return i}();this.customElement=new u(o,this.options.password,this.locales.password)}else if(o.is('input[type="hidden"]')){return}else if(o.is("select")){var p=function(){return{preventScrolling:function t(e){var t=e.prop("scrollHeight")-e.outerHeight();var i=null,s=null;e.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(o){i=o.originalEvent.detail<0||o.originalEvent.wheelDelta>0?1:-1;s=e.scrollTop();if(s>=t&&i<0||s<=0&&i>0){o.stopPropagation();o.preventDefault()}});return this},makeList:function s(t){var s=e("<ul>");for(var o=0;o<t.length;o++){var n=t.eq(o),l=(n.attr("id")||"")!==""?n.attr("id")+i:"",r=n.attr("title");var a=n.attr("class")||"";if(n.is(":selected")){a+=(a!==""?" ":"")+"selected sel"}if(n.is(":disabled")){a+=(a!==""?" ":"")+"disabled"}var d={title:r,data:n.data(),html:n.html()};if(l!==""){d["id"]=l}if(n.parent().is("optgroup")){var c="";if(n.parent().attr("class")!==undefined){c=" "+n.parent().attr("class")}if(n.is(":first-child")){e("<li>",{"class":"optgroup"+c,html:n.parent().attr("label")}).appendTo(s)}e("<li>",e.extend(d,{"class":"option"})).addClass(a).addClass(c).data("jqfs-class",n.attr("class")).appendTo(s)}else{e("<li>",d).addClass(a).data("jqfs-class",n.attr("class")).appendTo(s)}}return s}}}();var v=function(){var i=function s(t,i,o){this.element=t;this.options=i;this.locale=o;this.ajaxOptions=i.search.ajax;this.ajaxData={term:"",page:0};this.ajaxTimeout=undefined;var l=new n(this.element);this.searchBlock=e('<div class="jq-selectbox__search">'+'<input type="search" autocomplete="off" placeholder="'+(t.data("search-placeholder")||o.search["placeholder"])+'">'+"</div>"+'<div class="jq-selectbox__not-found">'+(t.data("search-not-found")||o.search["notFound"])+"</div>").hide();this.dropdown=e('<div class="jq-selectbox__dropdown" style="position: absolute">'+"<ul></ul>"+"</div>").prepend(this.searchBlock);this.selectbox=e('<div class="jq-selectbox jqselect">'+'<div class="jq-selectbox__select">'+'<div class="jq-selectbox__select-text"></div>'+'<div class="jq-selectbox__trigger">'+(i.triggerHTML||"")+"</div>"+"</div></div>").attr({id:l.id,title:l.title}).data(l.data).addClass(l.classes).append(this.dropdown);t.after(this.selectbox).prependTo(this.selectbox);this.selectboxSelect=e("div.jq-selectbox__select",this.selectbox);this.selectboxText=e("div.jq-selectbox__select-text",this.selectbox);this.loadDropdown();this.dropdown.hide();this.setEvents().repaint();t.addClass("jq-hidden");if(!r.registered){e(document).on("click",r);r.registered=true}};i.prototype={loadDropdown:function o(){var t=this.element,i=this.options,s=this.locale,o=this.selectbox,n=this.dropdown,l=this.searchBlock;var r=e("option",t),a=r.filter(":selected"),d=p.makeList(r),c=!t.data("search")||i.search,h=t.data("search-limit")||(i.search||{}).limit,f=e("div.jq-selectbox__not-found",n);n.find("ul").replaceWith(d);var u=e("li",n).css({display:"inline-block"}),v=u.filter(".selected");if(n.css("left")==="auto"){n.css({left:0})}this.calculateDropdownWidth();this.calculateDropdownHeight();if(u.length>h||this.ajaxOptions!==undefined&&this.ajaxOptions.url!==""){l.show();f.toggle(u.filter(":visible").length<1)}else{l.hide()}if(v.length){if(r.first().text()!==a.text()){o.addClass("changed")}o.data("jqfs-class",v.data("jqfs-class")).addClass(v.data("jqfs-class"))}return this},calculateDropdownWidth:function a(){var t=this.element,i=this.selectbox,s=this.selectboxText,o=this.dropdown;var n=e("li",o);var l=0,r=0;n.each(function(){var t=e(this);if(t.innerWidth()>l){l=t.innerWidth();r=t.width()}});n.css({display:""});if(s.is(".placeholder")&&s.width()>l){s.width(s.width())}else{var a=i.clone().appendTo("body").width("auto");var d=a.outerWidth();a.remove();if(d===i.outerWidth()){s.width(r)}}if(l>i.width()){o.width(l)}if(e("option",t).first().text()===""&&t.data("placeholder")!==""){n.first().hide()}return this},calculateDropdownHeight:function d(){var t=this.selectbox,i=this.dropdown;var s=e("li",i);if(s.data("li-height")===undefined){s.data("li-height",s.outerHeight())}if(i.css("top")==="auto"){i.css({top:t.outerHeight(true)||0})}return this},dropDown:function c(t,i,s,o,n){var l=e("input",this.dropdown).parent().outerHeight(true)||0;this.selectbox.removeClass("dropup").addClass("dropdown");var r=function a(){t.css("max-height",Math.floor((i-l-o)/o)*o)};r();t.css("max-height",n!=="none"&&parseInt(n)>0?parseInt(n):s);if(i<this.dropdown.outerHeight()+o){r()}},dropUp:function h(t,i,s,o,n){var l=e("input",this.dropdown).parent().outerHeight(true)||0;this.selectbox.removeClass("dropdown").addClass("dropup");var r=function a(){t.css("max-height",Math.floor((i-e(window).scrollTop()-l-o)/o)*o)};r();t.css("max-height",n!=="none"&&n>0?n:s);if(i-e(window).scrollTop()-o<this.dropdown.outerHeight()+o){r()}},setEvents:function f(){var i=this,s=this.element,o=this.options,n=this.ajaxOptions,r=this.selectbox,a=this.dropdown,d=this.searchBlock.find("input"),c=this.selectboxSelect,h=this.selectboxText;var f=e("option",this.element),u=s.data("smart-position")||o.smartPosition;var v=e("ul",a),m=e("li",a),g=e("div.jq-selectbox__not-found",a),b=r.outerHeight(true)||0,w=v.css("max-height")||0,x=b||0;r.on("repaint",function(){i.repaint()});c.on("click",function(){if(s.is(":disabled")){return}if(e("div.jq-selectbox").filter(".opened").length){o.onClosed.call(e("div.jq-selectbox").filter(".opened"))}s.trigger("focus");if(l){return}var t=m.data("li-height")||0;var n=s.data("visible-options")||o.visibleOptions,c=r.offset().top||0,h=e(window).height()-b-(c-e(window).scrollTop()),f=d.parent().outerHeight(true)||0,x=n===0?"auto":t*n,y=n>0&&n<6?x:t*5;console.log("dropdown:hidden - "+a.is(":hidden"));console.log(a);if(a.is(":hidden")){e("div.jqselect").removeClass("opened");e("div.jq-selectbox__dropdown:visible").hide();r.addClass("opened focused");a.show();if(u&&h<=y+f+t){i.dropUp(v,c,x,t,w)}else{i.dropDown(v,h,x,t,w)}if(r.offset().left+a.outerWidth()>e(window).width()){a.css({left:"auto",right:0})}if(d.parent().is(":visible")){console.log("dropdownSearch:focus");d.val("").focus();g.hide()}o.onOpened.call(r)}else{console.log("hide");a.hide();r.removeClass("opened dropup dropdown");if(e("div.jq-selectbox").filter(".opened").length){o.onClosed.call(r)}}if(m.filter(".selected").length){if(s.val()===""){v.scrollTop(0)}else{if(v.innerHeight()/t%2!==0){t=t/2}v.scrollTop(v.scrollTop()+m.filter(".selected").position().top-v.innerHeight()/2+t)}}p.preventScrolling(v)});d.on("keyup",function(){var t=e(this).val();console.log("dropdownSearch.keyUp");if(n!==undefined&&n.url!==""){if(t!==""){if(i.ajaxTimeout){window.clearTimeout(i.ajaxTimeout)}i.ajaxTimeout=window.setTimeout(function(){i.ajaxSearch(t,true)},n.delay||100)}else{s.find("option").remove();i.loadDropdown()}}else{m.each(function(){var i=e(this).html().match(new RegExp(".*?"+t+".*?","i"));e(this).toggle(i?true:false)})}if(f.first().text()===""&&s.data("placeholder")!==""){m.first().hide()}g.toggle(m.filter(":visible").length<1)});a.on("mouseout",function(){e("li.sel",a).addClass("selected")});m.on("hover",function(){e(this).siblings().removeClass("selected")}).on("click",function(){var t=e(this);if(t.is(".disabled, .optgroup")){return}if(!t.is(".selected")){var i=t.index()-t.prevAll(".optgroup").length;f.prop("selected",false).eq(i).prop("selected",true);s.change()}r.triggerHandle("click")});d.on("blur",function(t){if(e(t.relatedTarget).parents("div.jqselect").get(0)===r.get(0)){return}r.removeClass("focused opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()});s.on("change."+t,function(){r.triggerHandler("repaint")}).on("focus."+t,function(){r.addClass("focused")}).on("blur."+t,function(t){if(e(t.relatedTarget).length<=0||e(t.relatedTarget).parents("div.jqselect").get(0)===r.get(0)){return}r.removeClass("focused opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("keydown."+t+" keyup."+t,function(e){var t=m.data("li-height");if(e.which===38||e.which===37||e.which===33||e.which===36){if(s.val()===""){v.scrollTop(0)}else{v.scrollTop(v.scrollTop()+m.filter(".selected").position().top)}}if(e.which===40||e.which===39||e.which===34||e.which===35){v.scrollTop(v.scrollTop()+m.filter(".selected").position().top-v.innerHeight()+t)}if(e.which===13){e.preventDefault();a.hide();r.removeClass("opened dropup dropdown");o.onClosed.call(r)}}).on("keydown."+t,function(e){if(e.which===32){e.preventDefault();c.trigger("click")}});return this},ajaxSearch:function u(t,i){console.log("ajaxSearch");var s=this,o=this.element,n=this.options,l=this.ajaxOptions;this.ajaxData.term=t;var r={type:"GET",success:function d(e,t,o){return s.ajaxSearchSuccess(e,i)},error:function c(e,t,n){if(i){o.find("option").remove();s.loadDropdown()}console.error("ERROR")}};var a=e.extend(r,l);if(typeof a.url==="function"){a.url=l.url.call(o,s.ajaxData)}if(typeof a.data==="function"){a.data=l.data.call(o,s.ajaxData)}e.ajax(a)},ajaxSearchSuccess:function v(t,i){var s=this,o=this.element,n=this.options,l=this.ajaxOptions;var r=l.processResults(t,s.ajaxData);if(this.options.debug&&window.console&&console.error){if(!r||!r.items||!e.isArray(r.items)){console.error("JQuery.FormStyler-Modern: The AJAX results did not return an array in the `items` key of the response.")}}if(i){o.find("option").remove()}var a=r.items||r;e(a).each(function(t,i){e("<option>").attr("value",i.value||i.id||t).text(i.caption||i.name||i.text).appendTo(o)});this.loadDropdown()},repaint:function m(){var t=this.element,i=this.options,s=this.selectbox,o=this.dropdown,n=this.selectboxText;var l=e("option",t),r=e("li",o);var a=l.filter(":selected");if(a.val()===""){n.html(t.data("placeholder")||i.placeholder).addClass("placeholder")}else{n.html(a.html()).removeClass("placeholder")}if(s.data("jqfs-class")){s.removeClass(s.data("jqfs-class"))}s.data("jqfs-class",a.attr("class")).addClass(a.attr("class"));r.removeClass("selected sel").not(".optgroup").eq(t[0].selectedIndex).addClass("selected sel");r.removeClass("disabled").not(".optgroup").filter(function(e){return l.eq(e).is(":disabled")}).addClass("disabled");s.toggleClass("changed",l.first().text()!==r.filter(".selected").text());s.toggleClass("disabled",t.is(":disabled"));return this},destroy:function g(){this.element.off("."+t).removeAttr("style").parent().before(this.element).remove();return this}};return i}();var m=function(){var i=function s(t,i,o){this.element=t;this.options=i;this.locale=o;var l=new n(this.element);this.selectbox=e('<div class="jq-select-multiple jqselect"></div>').attr({id:l.id,title:l.title}).addClass(l.classes).data(l.data);t.after(this.selectbox).prependTo(this.selectbox);this.loadList();var r=e("ul",this.selectbox),a=e("li",this.selectbox).attr("unselectable","on"),d=this.element.attr("size")||4,c=r.outerHeight()||0,h=a.outerHeight()||0;r.css({height:h*d});if(c>this.selectbox.height()){r.css("overflowY","scroll");p.preventScrolling(r);if(a.filter(".selected").length){r.scrollTop(r.scrollTop()+a.filter(".selected").position().top)}}this.element.addClass("jq-hidden");this.setEvents().repaint()};i.prototype={loadList:function o(){var t=this.element,i=this.selectbox;var s=e("option",t),o=p.makeList(s);i.remove("ul").append(o);return this},setEvents:function r(){var i=this,s=this.element,o=this.selectbox;var n=e("option",s),r=e("ul",o),d=e("li",o),c=r.outerHeight()||0,h=d.outerHeight()||0,f=a||l;o.on("repaint",function(){i.repaint()});d.on("click tap",function(t){var i=e(this);if(s.is(":disabled")||i.is(".disabled")){return}s.focus();if(f&&!s.is("[multiple]")||!f&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey){i.siblings().removeClass("selected first")}if(f&&!s.is("[multiple]")||!f&&!t.ctrlKey&&!t.metaKey){i.addClass("selected")}if(s.is("[multiple]")&&i.is(".optgroup")){var o=i.nextUntil(".optgroup");o.each(function(){if(!e(this).is(".disabled, .optgroup")){if(e(this).is(".first")){e(this).removeClass("first")}e(this).toggleClass("selected")}})}else if(s.is("[multiple]")){if(!t.shiftKey){i.addClass("first")}if(f||t.ctrlKey||t.metaKey){i.toggleClass("selected first",!i.is(".selected")).siblings().removeClass("first")}else if(t.shiftKey){var l=function r(){if(e(this).is(".selected")){return false}else{e(this).not(".disabled, .optgroup").addClass("selected")}};i.siblings().removeClass("selected").siblings(".first").addClass("selected");if(i.prevAll(".first").length>0){i.prevAll().each(l)}if(i.nextAll(".first").length>0){i.nextAll().each(l)}if(d.filter(".selected").length===1){i.addClass("first")}}}n.prop("selected",false);d.filter(".selected").each(function(){var t=e(this),i=t.index()-(t.is(".option")?t.prevAll(".optgroup").length:0);n.eq(i).prop("selected",true)});s.change()});n.each(function(t){e(this).data("optionIndex",t)});s.on("change."+t,function(){o.triggerHandler("repaint")}).on("focus."+t,function(){o.addClass("focused")}).on("blur."+t,function(){o.removeClass("focused")});if(c>o.height()){s.on("keydown."+t,function(e){if(e.which===38||e.which===37||e.which===33){r.scrollTop(r.scrollTop()+d.filter(".selected").position().top-h)}if(e.which===40||e.which===39||e.which===34){r.scrollTop(r.scrollTop()+d.filter(".selected:last").position().top-r.innerHeight()+h*2)}})}return this},repaint:function d(){var t=this.element,i=this.selectbox;var s=e("option",t),o=e("li",i);var n=[];s.filter(":selected").each(function(){n.push(e(this).data("optionIndex"))});o.removeClass("selected").not(".optgroup").filter(function(t){return e.inArray(t,n)>-1}).addClass("selected");o.removeClass("disabled").not(".optgroup").filter(function(e){return s.eq(e).is(":disabled")}).addClass("disabled");i.toggleClass("disabled",t.is(":disabled"))},destroy:function c(){this.element.off("."+t+", refresh").removeAttr("style").parent().before(this.element).remove()}};return i}();if(o.is("[multiple]")||o.attr("size")>1){this.customElement=new m(o,this.options.select,this.locales.select)}else{this.customElement=new v(o,this.options.select,this.locales.select)}}else if(o.is("input")||o.is("textarea")||o.is("button")||o.is("a.button")){o.addClass(t);if(o.is('input[type="reset"]')){o.on("click",function(){setTimeout(function(){o.closest("form").children().trigger("repaint")},1)})}}o.on("refresh reinitialize",function(){s.reinitialize()})},destroy:function f(i){var s=e(this.element);if(!i){s.removeData("_"+t)}s.removeClass("jq-hidden");if(this.customElement!==undefined){this.customElement.destroy()}else if(s.is("select")){s.off("."+t+", refresh").removeAttr("style").parent().before(s).remove()}},reinitialize:function u(t){this.destroy(true);this.options=e.extend(true,{},this.options,t);this.locales=e.extend(true,{},this.locales,this.options.locales);this.init()}};e.fn[t]=function(i){var s=arguments;if(i===undefined||(typeof i==="undefined"?"undefined":_typeof(i))==="object"){this.each(function(){if(!e.data(this,"_"+t)){e.data(this,"_"+t,new l(this,i))}}).promise().done(function(){var i=e(this[0]).data("_"+t);if(i){i.options.onFormStyled.call()}});return this}else if(typeof i==="string"&&i[0]!=="_"&&i!=="init"){var o=undefined;this.each(function(){var n=e.data(this,"_"+t);if(n instanceof l&&typeof n[i]==="function"){o=n[i].apply(n,Array.prototype.slice.call(s,1))}});return o!==undefined?o:this}};e.fn.commonParents=function(){var t=this;return t.first().parents().filter(function(){return e(this).find(t).length===t.length})};e.fn.commonParent=function(){return e(this).commonParents().first()};function r(i){if(!e(i.target).parents().hasClass("jq-selectbox")&&i.target.nodeName!=="OPTION"){if(e("div.jq-selectbox.opened").length){var s=e("div.jq-selectbox.opened"),o=e("div.jq-selectbox__search input",s),n=e("div.jq-selectbox__dropdown",s),l=s.find("select").data("_"+t).options.select||{};l.onClosed.call(s);if(o.length){o.val("").keyup()}n.hide().find("li.sel").addClass("selected");s.removeClass("focused opened dropup dropdown")}}}r.registered=false});