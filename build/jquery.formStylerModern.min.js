(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){module.exports=e($||require("jquery"))}else{e(jQuery)}})(function(e){"use strict";var t="styler",i="-"+t,s={locale:navigator.browserLanguage||navigator.language||navigator.userLanguage||"en-US",select:{search:{limit:10},triggerHTML:'<div class="jq-selectbox__trigger-arrow"></div>',visibleOptions:0,smartPosition:true,onOpened:function(){},onClosed:function(){}},checkbox:{indeterminate:false},password:{switchHTML:'<button type="button" class="'+t+'"></button>'},onFormStyled:function(){}},l={"en-US":{file:{placeholder:"No file selected",browse:"Browse...",counter:"Selected files: %s"},select:{placeholder:"Select...",search:{notFound:"No matches found",placeholder:"Search..."}},password:{show:"&#10687;",hide:"&#10686;"}},"ru-RU":{file:{placeholder:"Файл не выбран",browse:"Обзор...",counter:"Выбрано файлов: %s"},select:{placeholder:"Выберите...",search:{notFound:"Совпадений не найдено",placeholder:"Поиск..."}}},"uk-UA":{file:{placeholder:"Файл не обрано",browse:"Огляд...",counter:"Обрано файлів: %s"},select:{placeholder:"Виберіть...",search:{notFound:"Збігів не знайдено",placeholder:"Пошук..."}}}};l["en"]=l["en-US"];l["ru"]=l["ru-RU"];l["ua"]=l["uk-UA"];function a(t,i){this.element=t;this.options=e.extend(true,{},s,i);var a=e.extend(true,{},l["en-US"],l[this.options.locale]);this.locales=e.extend(true,{},a,this.options.locales);this.init()}function o(e){if(e.attr("id")!==undefined&&e.attr("id")!==""){this.id=e.attr("id")+i}this.title=e.attr("title");this.classes=e.attr("class");this.data=e.data()}a.prototype={init:function(){var s=this,l=e(this.element);var a=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i),r=navigator.userAgent.match(/Android/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i);if(l.is(":checkbox")){var d=function(i){var s=this.options.checkbox||{},l=this.locales.checkbox||{};var a=new o(i),n=e('<div class="jq-checkbox"><div class="jq-checkbox__div"></div></div>').attr({id:a.id,title:a.title,unselectable:"on"}).addClass(a.classes).data(a.data);i.addClass("jq-hidden").after(n).prependTo(n);n.on("repaint",function(){if(i.is(":checked")||i.is(":indeterminate")){if(i.is(":indeterminate")){n.removeClass("checked").addClass("indeterminate")}else{n.removeClass("indeterminate").addClass("checked")}}else{n.removeClass("indeterminate").removeClass("checked")}n.toggleClass("disabled",i.is(":disabled"))}).on("click",function(e){e.preventDefault();if(!n.is(".disabled")){if(i.is(":checked")||i.is(":indeterminate")){i.prop("checked",s.indeterminate&&i.is(":indeterminate"));i.prop("indeterminate",false)}else{if(s.indeterminate){i.prop("checked",false).prop("indeterminate",true)}else{i.prop("checked",true).prop("indeterminate",false)}}i.focus().trigger("change").triggerHandler("click")}});i.closest("label").add('label[for="'+i.attr("id")+'"]').on("click."+t,function(t){if(!e(t.target).is("a")&&!e(t.target).closest(n).length){n.triggerHandler("click");t.preventDefault()}});i.on("change."+t,function(){n.triggerHandler("repaint")}).on("keydown."+t,function(e){if(e.which===32){e.preventDefault();n.triggerHandler("click")}}).on("focus."+t,function(){if(!n.is(".disabled")){n.addClass("focused")}}).on("blur."+t,function(){n.removeClass("focused")});n.triggerHandler("repaint")};d.call(this,l)}else if(l.is(":radio")){var c=function(i){var s=this.options.radio||{},l=this.locales.radio||{};var a=new o(i),n=e('<div class="jq-radio"><div class="jq-radio__div"></div></div>').attr({id:a.id,title:a.title,unselectable:"on"}).addClass(a.classes).data(a.data);i.addClass("jq-hidden").after(n).prependTo(n);n.on("repaint",function(){i.parent().toggleClass("checked",i.is(":checked"));n.toggleClass("disabled",i.is(":disabled"))}).on("click",function(t){t.preventDefault();if(!n.is(".disabled")){var s=i.attr("name");var l=n.closest("#"+s).find('input[name="'+s+'"]:radio');if(l.length<=0){l=e("body").find('input[name="'+s+'"]:radio')}l.prop("checked",false).parent().removeClass("checked");i.prop("checked",true).focus().trigger("change").triggerHandler("click")}});i.on("change."+t,function(e){n.triggerHandler("repaint")}).on("keydown."+t,function(e){if(e.which===32){e.preventDefault();n.trigger("click")}}).on("focus."+t,function(){if(!n.is(".disabled")){n.addClass("focused")}}).on("blur."+t,function(){n.removeClass("focused")});i.closest("label").add('label[for="'+i.attr("id")+'"]').on("click."+t,function(t){if(!e(t.target).is("a")&&!e(t.target).closest(n).length){n.triggerHandler("click");t.preventDefault()}});n.triggerHandler("repaint")};c.call(this,l)}else if(l.is(":file")){var f=function(i){var s=this.options.file||{},l=this.locales.file||{};var a=new o(i),n=i.data("placeholder")||l["placeholder"],r=i.data("browse")||l["browse"];var d=e('<div class="jq-file">'+'<div class="jq-file__name">'+n+"</div>"+'<div class="jq-file__browse">'+r+"</div>"+"</div>").attr({id:a.id,title:a.title}).addClass(a.classes).data(a.data);i.addClass("jq-hidden").after(d).appendTo(d);d.on("repaint",function(){var t=i.val(),l=e("div.jq-file__name",d);if(i.is("[multiple]")){var a=i[0].files.length;t="";if(a>0){var o=i.data("number")||s.counter;o=o.replace("%s",a);t=o}}l.text(t.replace(/.+[\\\/]/,"")||n);d.toggleClass("changed",t!=="");d.toggleClass("disabled",i.is(":disabled"))});i.on("change."+t,function(){d.triggerHandler("repaint")}).on("focus."+t,function(){d.addClass("focused")}).on("blur."+t,function(){d.removeClass("focused")}).on("click."+t,function(){d.removeClass("focused")});d.triggerHandler("repaint")};f.call(this,l)}else if(l.is('input[type="number"]')){var h=function(i){var s=this.options.number||{},l=this.locales.number||{};var a=new o(i),n=e('<div class="jq-number">'+'<div class="jq-number__spin minus"></div>'+'<div class="jq-number__spin plus"></div>'+"</div>").attr({id:a.id,title:a.title}).addClass(a.classes).data(a.data);i.after(n).prependTo(n).wrap('<div class="jq-number__field"></div>');var r=i.attr("min")||undefined,d=i.attr("max")||undefined,c=Number(i.attr("step"))||1,f=null,h=null;var u=function(t){var s=i.val(),l;if(!e.isNumeric(s)){s=0;i.val("0").change()}if(t.is(".minus")){l=Number(s)-c}else if(t.is(".plus")){l=Number(s)+c}var a=(c.toString().split(".")[1]||[]).length.prototype,o="1";if(a>0){while(o.length<=a){o=o+"0"}l=Math.round(l*o)/o}if(e.isNumeric(r)&&e.isNumeric(d)){if(l>=r&&l<=d){i.val(l).change()}}else if(e.isNumeric(r)&&!e.isNumeric(d)){if(l>=r){i.val(l).change()}}else if(!e.isNumeric(r)&&e.isNumeric(d)){if(l<=d){i.val(l).change()}}else{i.val(l).change()}};n.on("repaint",function(){n.toggleClass("disabled",i.is(":disabled"))}).on("mousedown","div.jq-number__spin",function(){if(i.is(":disabled")){return}var t=e(this);u(t);f=setTimeout(function(){h=setInterval(function(){u(t)},40)},350)}).on("mouseup mouseout","div.jq-number__spin",function(){if(i.is(":disabled")){return}clearTimeout(f);clearInterval(h)});i.on("focus."+t,function(){n.addClass("focused")}).on("blur."+t,function(){n.removeClass("focused")});n.triggerHandler("repaint")};h.call(this,l)}else if(l.is('input[type="password"]')){var u=function(i){var s=this.options.password||{},l=this.locales.password||{};if(s.switchHTML===undefined||s.switchHTML==="none"){i.addClass(t);return}var a=e('<div class="jq-password__switch">'+(s.switchHTML||"")+"</div>"),o=e('<div class="jq-password">').append(a),n=a.children("button").length>0?a.children("button"):a;if(n.html()===""&&l["show"]!==""){n.html(l["show"]);if(a.children("button").length<=0){a.addClass("jq-password__switch-text")}}i.after(o).prependTo(o);o.on("repaint",function(){o.toggleClass("disabled",i.is(":disabled"));n.prop("disabled",i.is(":disabled"))}).on("click",".jq-password__switch",function(){var t=e(this),s=t.closest(".jq-password"),a=s.is(".jq-password_seen");s.toggleClass("jq-password_seen",!a);if(l["show"]!==""&&l["hide"]!==""){n.html(a?l["show"]:l["hide"])}i.attr("type",a?"password":"text")});i.on("focus."+t,function(){o.addClass("focused")}).on("blur."+t,function(){o.removeClass("focused")});o.triggerHandler("repaint")};u.call(this,l)}else if(l.is('input[type="hidden"]')){return false}else if(l.is("select")){var p=function(s){var l=this.options.select||{},d=this.locales.select||{};var c=e("option",s);function f(e){var t=e.prop("scrollHeight")-e.outerHeight(),i=null,s=null;e.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(l){i=l.originalEvent.detail<0||l.originalEvent.wheelDelta>0?1:-1;s=e.scrollTop();if(s>=t&&i<0||s<=0&&i>0){l.stopPropagation();l.preventDefault()}})}function h(t){var s=e("<ul>");for(var l=0;l<t.length;l++){var a=t.eq(l),o=a.attr("class")||"",n=(a.attr("id")||"")!==""?a.attr("id")+i:"",r=a.attr("title");if(a.is(":selected")){o+=(o!==""?" ":"")+"selected sel"}if(a.is(":disabled")){o+=(o!==""?" ":"")+"disabled"}var d={title:r,data:a.data(),html:a.html()};if(n!==""){d["id"]=n}if(a.parent().is("optgroup")){var c="";if(a.parent().attr("class")!==undefined){c=" "+a.parent().attr("class")}if(a.is(":first-child")){e("<li>",{"class":"optgroup"+c,html:a.parent().attr("label")}).appendTo(s)}e("<li>",e.extend(d,{"class":"option"})).addClass(o).addClass(c).data("jqfs-class",a.attr("class")).appendTo(s)}else{e("<li>",d).addClass(o).data("jqfs-class",a.attr("class")).appendTo(s)}}return s}function u(i){var s=new o(i),r=h(c),u="",p=i.data("placeholder")||l.placeholder,v=i.data("search")||(l.search?true:false),g=i.data("search-limit")||(l.search||{}).limit,m=i.data("smart-position")||l.smartPosition,b=i.data("search-not-found")||d.search["notFound"],w=i.data("search-placeholder")||d.search["placeholder"];if(v){u='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+w+'"></div>'+'<div class="jq-selectbox__not-found">'+b+"</div>"}var C=e('<div class="jq-selectbox__dropdown" style="position: absolute">'+u+"</div>").append(r);var q=e('<div class="jq-selectbox jqselect">'+'<div class="jq-selectbox__select">'+'<div class="jq-selectbox__select-text"></div>'+'<div class="jq-selectbox__trigger">'+l.triggerHTML||""+"</div>"+"</div></div>").attr({id:s.id,title:s.title}).data(s.data).addClass(s.classes).append(C);i.after(q).prependTo(q);var j=e("div.jq-selectbox__select",q),x=e("div.jq-selectbox__select-text",q),_=c.filter(":selected");var y=e("ul",C),k=e("li",C).css({display:"inline-block"}),T=e("input",C),H=e("div.jq-selectbox__not-found",C).hide(),A=0,N=0;if(k.length<g){T.parent().hide()}k.each(function(){var t=e(this);if(t.innerWidth()>A){A=t.innerWidth();N=t.width()}});k.css({display:""});if(x.is(".placeholder")&&x.width()>A){x.width(x.width())}else{var D=q.clone().appendTo("body").width("auto");var M=D.outerWidth();D.remove();if(M===q.outerWidth()){x.width(N)}}if(A>q.width()){C.width(A)}if(c.first().text()===""&&i.data("placeholder")!==""){k.first().hide()}i.addClass("jq-hidden");var P=q.outerHeight(true)||0,S=T.parent().outerHeight(true)||0,K=y.css("max-height")||0,L=k.filter(".selected"),O=P||0;if(k.data("li-height")===undefined){k.data("li-height",k.outerHeight())}if(C.css("left")==="auto"){C.css({left:0})}if(C.css("top")==="auto"){C.css({top:P})}C.hide();if(L.length){if(c.first().text()!==_.text()){q.addClass("changed")}q.data("jqfs-class",L.data("jqfs-class"));q.addClass(L.data("jqfs-class"))}q.on("repaint",function(){var e=c.filter(":selected"),t=c.filter(":disabled");if(e.val()===""){x.html(p).addClass("placeholder")}else{x.html(e.text()).removeClass("placeholder")}if(q.data("jqfs-class")){q.removeClass(q.data("jqfs-class"))}q.data("jqfs-class",e.attr("class"));q.addClass(e.attr("class"));k.removeClass("selected sel").not(".optgroup").eq(i[0].selectedIndex).addClass("selected sel");k.removeClass("disabled").not(".optgroup").filter(function(e){return c.eq(e).is(":disabled")}).addClass("disabled");q.toggleClass("changed",c.first().text()!==k.filter(".selected").text());q.toggleClass("disabled",i.is(":disabled"))});j.on("click",function(){if(i.is(":disabled")){return}if(e("div.jq-selectbox").filter(".opened").length){l.onClosed.call(e("div.jq-selectbox").filter(".opened"))}i.focus();if(a){return}var t=e(window),s=k.data("li-height")||0,o=q.offset().top||0,n=t.height()-P-(o-t.scrollTop()),r=i.data("visible-options")||l.visibleOptions,d=r===0?"auto":s*r,h=r>0&&r<6?d:s*5;var u=function(e){var t=function(){e.css("max-height",Math.floor((n-S-s)/s)*s)};t();e.css("max-height",K!=="none"&&K>0?K:d);if(n<C.outerHeight()+s){t()}};var p=function(e){var i=function(){e.css("max-height",Math.floor((o-t.scrollTop()-s-S)/s)*s)};i();e.css("max-height",K!=="none"&&K>0?K:d);if(o-t.scrollTop()-s<C.outerHeight()+s){i()}};if(m){if(n>h+S+20){u(y);q.removeClass("dropup").addClass("dropdown")}else{p(y);q.removeClass("dropdown").addClass("dropup")}}else{if(n>h+S+20){u(y);q.removeClass("dropup").addClass("dropdown")}}if(q.offset().left+C.outerWidth()>t.width()){C.css({left:"auto",right:0})}e("div.jqselect").removeClass("opened");if(C.is(":hidden")){e("div.jq-selectbox__dropdown:visible").hide();C.show();q.addClass("opened focused");l.onOpened.call(q)}else{C.hide();q.removeClass("opened dropup dropdown");if(e("div.jq-selectbox").filter(".opened").length){l.onClosed.call(q)}}if(T.length){T.val("").focus().keyup();H.hide();T.keyup(function(){var t=e(this).val();k.each(function(){var i=e(this).html().match(new RegExp(".*?"+t+".*?","i"));e(this).toggle(i?true:false)});if(c.first().text()===""&&i.data("placeholder")!==""){k.first().hide()}H.toggle(k.filter(":visible").length<1)})}if(k.filter(".selected").length){if(i.val()===""){y.scrollTop(0)}else{if(y.innerHeight()/s%2!==0){s=s/2}y.scrollTop(y.scrollTop()+k.filter(".selected").position().top-y.innerHeight()/2+s)}}f(y)});var U=k.filter(".selected").text();k.on("hover",function(){e(this).siblings().removeClass("selected")}).on("click",function(){var t=e(this);if(t.is(".disabled, .optgroup")){return}i.focus();if(!t.is(".selected")){var s=t.index();s-=t.prevAll(".optgroup").length;c.prop("selected",false).eq(s).prop("selected",true);i.change()}C.hide();q.removeClass("opened dropup dropdown");l.onClosed.call(q)});C.on("mouseout",function(){e("li.sel",C).addClass("selected")});i.on("change."+t,function(){q.triggerHandler("repaint")}).on("focus."+t,function(){q.addClass("focused");e("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("blur."+t,function(){q.removeClass("focused")}).on("keydown."+t+" keyup."+t,function(e){var t=k.data("li-height");if(e.which===38||e.which===37||e.which===33||e.which===36){if(i.val()===""){y.scrollTop(0)}else{y.scrollTop(y.scrollTop()+k.filter(".selected").position().top)}}if(e.which===40||e.which===39||e.which===34||e.which===35){y.scrollTop(y.scrollTop()+k.filter(".selected").position().top-y.innerHeight()+t)}if(e.which===13){e.preventDefault();C.hide();q.removeClass("opened dropup dropdown");l.onClosed.call(q)}}).on("keydown."+t,function(e){if(e.which===32){e.preventDefault();j.trigger("click")}});if(!n.registered){e(document).on("click",n);n.registered=true}q.triggerHandler("repaint")}function p(i){var s=new o(i),l=h(c),a=e('<div class="jq-select-multiple jqselect"></div>').attr({id:s.id,title:s.title}).addClass(s.classes).data(s.data).append(l);i.after(a).prependTo(a);var n=e("ul",a),r=e("li",a).attr("unselectable","on"),d=i.attr("size")||4,u=n.outerHeight()||0,p=r.outerHeight()||0;n.css({height:p*d});if(u>a.height()){n.css("overflowY","scroll");f(n);if(r.filter(".selected").length){n.scrollTop(n.scrollTop()+r.filter(".selected").position().top)}}i.addClass("jq-hidden");a.on("repaint",function(){var t=[];c.filter(":selected").each(function(){t.push(e(this).data("optionIndex"))});r.removeClass("selected").not(".optgroup").filter(function(i){return e.inArray(i,t)>-1}).addClass("selected");r.removeClass("disabled").not(".optgroup").filter(function(e){return c.eq(e).is(":disabled")}).addClass("disabled");a.toggleClass("disabled",i.is(":disabled"))});r.click(function(t){var s=e(this);if(i.is(":disabled")||s.is(".disabled, .optgroup")){return}i.focus();if(!t.ctrlKey&&!t.metaKey){s.addClass("selected")}if(!t.shiftKey){s.addClass("first")}if(!t.ctrlKey&&!t.metaKey&&!t.shiftKey){s.siblings().removeClass("selected first")}if(t.ctrlKey||t.metaKey){s.toggleClass("selected first",!s.is(".selected"));s.siblings().removeClass("first")}if(t.shiftKey){var l=false,a=false;s.siblings().removeClass("selected").siblings(".first").addClass("selected");s.prevAll().each(function(){l=l||e(this).is(".first")});s.nextAll().each(function(){a=a||e(this).is(".first")});if(l){s.prevAll().each(function(){if(e(this).is(".selected")){return false}else{e(this).not(".disabled, .optgroup").addClass("selected")}})}if(a){s.nextAll().each(function(){if(e(this).is(".selected")){return false}else{e(this).not(".disabled, .optgroup").addClass("selected")}})}if(r.filter(".selected").length===1){s.addClass("first")}}c.prop("selected",false);r.filter(".selected").each(function(){var t=e(this),i=t.index()-(t.is(".option")?t.prevAll(".optgroup").length:0);c.eq(i).prop("selected",true)});i.change()});c.each(function(t){e(this).data("optionIndex",t)});i.on("change."+t,function(){a.triggerHandler("repaint")}).on("focus."+t,function(){a.addClass("focused")}).on("blur."+t,function(){a.removeClass("focused")});if(u>a.height()){i.on("keydown."+t,function(e){if(e.which===38||e.which===37||e.which===33){n.scrollTop(n.scrollTop()+r.filter(".selected").position().top-p)}if(e.which===40||e.which===39||e.which===34){n.scrollTop(n.scrollTop()+r.filter(".selected:last").position().top-n.innerHeight()+p*2)}})}a.triggerHandler("repaint")}if(s.is("[multiple]")){if(r||a){return}p(s)}else{if(s.attr("size")>1){p(s)}else{u(s)}}};p.call(this,l)}else if(l.is("input")||l.is("textarea")||l.is("button")||l.is("a.button")){l.addClass(t)}else if(l.is(":reset")){l.on("click",function(){setTimeout(function(){l.closest("form").children().trigger("repaint")},1)})}l.on("refresh reinitialize",function(){s.reinitialize()})},destroy:function(i){var s=e(this.element);if(!i){s.removeData("_"+t)}s.removeClass("jq-hidden");if(s.is(":checkbox")||s.is(":radio")){s.off("."+t+", refresh").removeAttr("style").parent().before(s).remove();s.closest("label").add('label[for="'+s.attr("id")+'"]').off("."+t)}else if(s.is('input[type="number"]')){s.off("."+t+", refresh").closest(".jq-number").before(s).remove()}else if(s.is('input[type="password"]')){s.off("."+t+", refresh").closest(".jq-password").before(s).remove()}else if(s.is(":file")||s.is("select")){s.off("."+t+", refresh").removeAttr("style").parent().before(s).remove()}},reinitialize:function(t){this.destroy(true);e.extend(this.options,t);e.extend(this.locales,this.options.locales);this.init()}};e.fn[t]=function(i){var s=arguments;if(i===undefined||typeof i==="object"){this.each(function(){if(!e.data(this,"_"+t)){e.data(this,"_"+t,new a(this,i))}else{e(this).styler("reinitialize")}}).promise().done(function(){var i=e(this[0]).data("_"+t);if(i){i.options.onFormStyled.call()}});return this}else if(typeof i==="string"&&i[0]!=="_"&&i!=="init"){var l;this.each(function(){var o=e.data(this,"_"+t);if(o instanceof a&&typeof o[i]==="function"){l=o[i].apply(o,Array.prototype.slice.call(s,1))}});return l!==undefined?l:this}};e.fn.commonParents=function(){var t=this;return t.first().parents().filter(function(){return e(this).find(t).length===t.length})};e.fn.commonParent=function(){return e(this).commonParents().first()};function n(i){if(!e(i.target).parents().hasClass("jq-selectbox")&&i.target.nodeName!=="OPTION"){if(e("div.jq-selectbox.opened").length){var s=e("div.jq-selectbox.opened"),l=e("div.jq-selectbox__search input",s),a=e("div.jq-selectbox__dropdown",s),o=s.find("select").data("_"+t).options.select||{};o.onClosed.call(s);if(l.length){l.val("").keyup()}a.hide().find("li.sel").addClass("selected");s.removeClass("focused opened dropup dropdown")}}}n.registered=false});